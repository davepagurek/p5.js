<!DOCTYPE html>
<html>

<head>
  <title>P5 test</title>
  <meta http-equiv="pragma" content="no-cache" />
  <meta http-equiv="cache-control" content="no-cache" />
  <meta charset="utf-8">

  <style>
    body {
      margin: 0;
      overflow: hidden;
    }
  </style>
</head>

<body>
  <script type="module">
    import p5 from '../src/app.js';
    import rendererWebGPU from '../src/webgpu/p5.RendererWebGPU.js';

    p5.registerAddon(rendererWebGPU);

    const sketch = function (p) {
      let fbo;
      p.setup = async function () {
        await p.createCanvas(400, 400, p.WEBGPU);
      };

      p.draw = function () {
        const t = p.millis() * 0.008;
        p.background(200);
        p.noStroke();
        for (const [i, c] of ['red', 'lime', 'blue'].entries()) {
          p.push();
          p.fill(c);
          p.translate(
            p.width/3 * p.sin(t + i * Math.E),
            p.width/3 * p.sin(t * 0.9 + i * Math.E + 0.2),
            p.width/3 * p.sin(t * 1.2 + i * Math.E + 0.3),
          )
          p.sphere(30);
          p.pop();
        }
      };
    };

    new p5(sketch);
  </script>
</body>

</html>